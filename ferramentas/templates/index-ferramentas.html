{% load static %}

<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'styles-ferramentas.css' %}">
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'logo-vermelha.ico' %}">


    <title>Aton Ferramentas</title>
</head>
<div class="container">
    <div id="header" class="row">
        <div class="col">
            <h1 id="header-titulo"><a href="/">ATON FERRAMENTAS</a></h1>
        </div>
    </div>
    <!-- Messages -->
    <div class="row">
        <div class="col">
            {% if messages %}
            {% for message in messages %}
            <div class="alert {{ message.tags}} alert-dismissible fade show text-center" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title  text-center">Fotos</h5>
                    <form action="baixar_fotos/" method="post">
                        <div class="row">
                            <div class="col-8">
                                <div class="input-group input-group-sm mb-3">
                                    <span class="input-group-text" id="inputGroup-sizing-sm">CODID</span>
                                    <input type="number" name="input-codid" id="input-codid" min="0" step="1"
                                        class="form-control" required>
                                </div>
                            </div>
                            <div class="col">
                                <button style="background-color: green!important;" id="btn-baixar-fotos" type="submit"
                                    value="Gerar Excel" class="btn btn-secondary">Baixar</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>

                    <form style="margin-top: 10px;" action="remover_fotos/" id="formulario-postagem" method="post">
                        <div class="row">
                            <div class="col-8">
                                <div class="input-group input-group-sm mb-3">
                                    <span class="input-group-text" id="inputGroup-sizing-sm">CODID</span>
                                    <input type="number" name="input-codid" id="input-codid" min="0" step="1"
                                        class="form-control" required>
                                </div>
                            </div>
                            <div class="col">
                                <button id="btn-remover-fotos" type="submit" value="Gerar Excel"
                                    class="btn btn-secondary">Remover</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title  text-center">Catálogo Requirido</h5>
                    <p class="card-text text-center">Remove a opção de todos os produtos que estão na aba de publicação.
                    </p>
                    <form style="margin-top: 10px;" action="{% url 'remover-catalogo-requerido' %}" method="post">
                        <div class="row">
                            <div class="col text-center">
                                <button id="btn-remover-catalogo-requirido" type="submit" value="Gerar Excel"
                                    class="btn btn-secondary">Remover</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title  text-center">Alterar EAN</h5>
                    <p class="card-text text-center">Altera o EAN do Produto apenas na parte de publicação.</p>
                    <form action="{% url 'alterar-ean' %}" method="post">
                        <div class="row">
                            <div class="col">
                                <div class="input-group input-group-sm mb-3">
                                    <span style="width: 80px;" class="input-group-text">AUTOID</span>
                                    <input type="number" name="autoid" id="autoid" class="form-control" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="input-group input-group-sm mb-3">
                                    <span style="width: 80px;" class="input-group-text">EAN</span>
                                    <input type="number" name="ean" id="ean" class="form-control" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <button style="background-color: orange!important;" id="btn-baixar-fotos" type="submit"
                                    value="Gerar Excel" class="btn btn-secondary">Alterar</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title text-center">Gerar EAN</h5>
                    <form action="{% url 'gerar-ean-aleatorio' %}" method="post">
                        <div class="row">
                            <div class="col">
                                <div class="input-group input-group-sm mb-3">
                                    <span style="width: 80px;" class="input-group-text">EAN</span>
                                    {% if ean_gerado %}
                                    <input type="number" name="ean-gerado" id="ean-gerado" class="form-control"
                                        value="{{ ean_gerado }}" readonly>
                                    {% else %}
                                    <input type="number" name="ean-gerado" id="ean-gerado" class="form-control"
                                        readonly>
                                    {% endif %}
                                    <button type="button" id="btn-copiar" class="btn btn-secondary">Copiar</button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <button style="background-color: green!important;" id="btn-gerar-ean" type="submit"
                                    value="Gerar Ean" class="btn btn-secondary">Gerar</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title  text-center">Alterar Custo</h5>
                    {% if url_imagem %}
                    <div class="text-center">
                        <img src="{{ url_imagem }}" style="margin-top: 10px; margin-bottom: 10px;" class="img-fluid"
                            alt="imagem_produto" width="150" height="150">
                    </div>
                    <div class="div">
                        <p style="margin-bottom: 1px;" class="text-center">ID: {{ codid_custo }}</p>
                        <p class="text-center">Custo Atual: R$ {{ custo }}</p>
                    </div>
                    {% endif %}
                    <form action="{% url 'alterar-custo' %}" method="post">
                        <div class="row">
                            <div class="col">
                                <div class="input-group input-group-sm mb-3">
                                    <span style="width: 80px;" class="input-group-text">CODID</span>
                                    {% if codid_custo %}
                                    <input type="number" name="codid-custo" id="codid-custo" class="form-control"
                                        min="1" value="{{ codid_custo }}" required>
                                    {% else %}
                                    <input type="number" name="codid-custo" id="codid-custo" class="form-control"
                                        min="1" required>
                                    {% endif %}
                                </div>
                                <div class="input-group input-group-sm mb-3">
                                    <span style="width: 120px;" class="input-group-text">NOVO CUSTO</span>
                                    <input type="text" name="novo-custo" id="novo-custo" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <button style="background-color: orange!important;" id="btn-alterar-custo" type="submit"
                                    value="btn-alterar" name="btn-alterar" class="btn btn-secondary">Alterar</button>
                            </div>
                            <div class="col text-center">
                                <button style="background-color: gray!important;" id="btn-visualizar-produto"
                                    type="submit" value="btn-visualizar" name="btn-visualizar"
                                    class="btn btn-secondary">Visualizar</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title  text-center">Remover vinculação Netshoes</h5>
                    <form action="{% url 'remover-sku-netshoes' %}" method="post">
                        <div class="row">
                            <div class="col">
                                <div class="input-group input-group-sm mb-3">
                                    <span style="width: 80px;" class="input-group-text">SKU</span>
                                    <input type="text" name="sku-netshoes-vinculacao" id="sku-netshoes-vinculacao"
                                        class="form-control" required>
                                </div>
                            </div>
                        </div>
                        <div style="margin-bottom: 10px;" class="row">
                            <div class="col">
                                <select class="form-select" name="loja" required>
                                    <option value="" disabled selected>LOJA</option>
                                    <option value="2">MADZ</option>
                                    <option value="3">LEAL</option>
                                    <option value="4">PISSTE</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <button style="background-color: red!important;" id="btn-remover-sku-netshoes"
                                    type="submit" class="btn btn-secondary">Remover</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <div class="row">
                        <div class="col-8">
                            <h5 class="card-title  text-center">Cria planilha SQL</h5>
                        </div>
                        <div class="col-4">
                            <button style="background-color: rgb(72, 72, 207)!important; margin-bottom: 20px;"
                                data-bs-toggle="modal" data-bs-target="#modalAjuda" type="submit"
                                class="btn btn-secondary">Ajuda</button>
                        </div>
                    </div>
                    <form action="{% url 'baixar-planilha-via-sql' %}" method="post">
                        <div class="row">
                            <div class="col">
                                <textarea class="form-control" name="sql-comando" id="sql-comando" rows="6"
                                    required></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <button style="background-color: green!important; margin-top: 20px; width: 100px;"
                                    id="btn-baixar-planilha" type="submit" class="btn btn-secondary">Baixar</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card" style="width: 22rem">
                <div class="card-body">
                    <h5 class="card-title  text-center">Remover vinculação MLB</h5>
                    <form action="{% url 'remover-mlb' %}" method="post">
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label for="exampleFormControlTextarea1" class="form-label">MLBS</label>
                                    <textarea class="form-control" name="mlb-remover-aton" id="mlb-remover-aton"
                                        rows="4"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <button style="background-color: red!important;" id="btn-remover-mlb" type="submit"
                                    value="Gerar Excel" class="btn btn-secondary">Remover</button>
                            </div>
                        </div>
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="col">

    </div>
</div>

<div class="modal fade" id="modalAjuda" tabindex="-1" aria-labelledby="modalAjudaLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalAjudaLabel">Ajuda Comando</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h3>Algoritmo</h3>
                <p>SELECT <-- sempre tem que ter</p>
                        <p>COLUNAS <-- nome das colunas ou asterisco para pegar todas</p>
                                <p>FROM <-- sempre tem que ter</p>
                                        <p>MATERIAIS <-- nome da tabela de produtos</p>
                                                <p>WHERE <-- caso você queira filtrar valores</p>
                                                        <h3>Exemplos</h3>
                                                        <p>SELECT * FROM MATERIAIS</p>
                                                        <hr>
                                                        <p>SELECT * FROM MATERIAIS WHERE VLR_CUSTO > 50</p>
                                                        <hr>
                                                        <p>SELECT * FROM MATERIAIS WHERE VLR_CUSTO > 50 AND INATIVO =
                                                            'N'</p>
                                                        <hr>
                                                        <p>SELECT CODID, COD_INTERNO, DESCRICAO FROM MATERIAIS</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>

<body>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

<script>
    document.getElementById('formulario-postagem').addEventListener('submit', function (event) {
        var confirmacao = confirm("Você deseja excluir TODAS as fotos desse CODID?"); // Exibe o prompt
        if (!confirmacao) {
            event.preventDefault(); // Cancela o envio do formulário se o usuário clicar em "Cancelar"
        }
    });
</script>

<script>
    var myModal = document.getElementById('myModal')

    myModal.addEventListener('shown.bs.modal', function () {
        myInput.focus()
    })
</script>

<script>
    document.getElementById("btn-copiar").addEventListener("click", function () {
        var inputElement = document.getElementById("ean-gerado");
        inputElement.select();
        document.execCommand("copy");
    });
</script>

</html>